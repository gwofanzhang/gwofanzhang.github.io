<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Gwofan Zhang 张国藩</title>
  <meta name="description" content="Gwofan Zhang (张国藩) — Medical Physics | Photochemistry | AI for Molecular Design." />
  <meta name="author" content="Gwofan Zhang" />
  <link rel="canonical" href="https://gwofanzhang.github.io/" />

  <!-- Open Graph / Twitter -->
  <meta property="og:title" content="Gwofan Zhang 张国藩" />
  <meta property="og:site_name" content="Gwofan Zhang" />
  <meta property="og:description" content="Medical Physics | Photochemistry | AI for Molecular Design" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://gwofanzhang.github.io/" />
  <meta property="og:image" content="/assets/avatar.jpg" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Gwofan Zhang 张国藩" />
  <meta name="twitter:description" content="Medical Physics | Photochemistry | AI for Molecular Design" />
  <meta name="twitter:image" content="/assets/avatar.jpg" />

  <!-- Schema.org Person -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Gwofan Zhang",
    "alternateName": "张国藩",
    "email": "mailto:guofan.zhang@duke.edu",
    "affiliation": {"@type": "Organization", "name": "Duke University"},
    "url": "https://gwofanzhang.github.io/",
    "sameAs": [
      "https://scholars.duke.edu/person/Guofan.Zhang",
      "https://orcid.org/0000-0002-1995-5355",
      "https://scholar.google.com/citations?user=ENH-gs8AAAAJ",
      "https://www.researchgate.net/profile/Guofan-Zhang-3"
    ]
  }
  </script>

  <style>
    :root {
      --bg: #ffffff;
      --text: #1f2937; /* slate-800 */
      --muted: #6b7280; /* gray-500 */
      --accent: #0ea5e9; /* sky-500 */
      --card: #f8fafc; /* slate-50 */
      --line: #e5e7eb; /* gray-200 */
    }
    @media (prefers-color-scheme: dark) {
      :root { --bg:#0b1220; --text:#e5e7eb; --muted:#9ca3af; --accent:#38bdf8; --card:#0f172a; --line:#1f2937; }
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg); color: var(--text);
    }

    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }

    /* ====== Layout (ngarabird-style: sticky left column + content) ====== */
    .wrap { display: grid; grid-template-columns: 320px 1fr; gap: 32px; max-width: 1100px; margin: 0 auto; padding: 32px 20px; }
    @media (max-width: 900px) { .wrap { grid-template-columns: 1fr; } .sidebar { position: static; top: auto; } }

    .sidebar { position: sticky; top: 24px; align-self: start; }
    .card { background: var(--card); border: 1px solid var(--line); border-radius: 16px; padding: 20px; }

    .avatar { width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 2px solid var(--line); }
    .name { font-size: 1.6rem; font-weight: 700; margin: 12px 0 4px; }
    .tagline { color: var(--muted); margin: 0 0 12px; }

    .meta { list-style: none; margin: 12px 0 0; padding: 0; }
    .meta li { display: flex; align-items: center; gap: 8px; margin: 6px 0; }
    .meta .label { width: 64px; color: var(--muted); font-size: 0.9rem; }

    .social { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 12px; }
    .pill { padding: 6px 10px; border: 1px solid var(--line); border-radius: 999px; font-size: 0.9rem; background: transparent; }

    nav { margin-top: 16px; display: flex; flex-wrap: wrap; gap: 10px; }
    nav a { padding: 6px 10px; border-radius: 999px; border: 1px solid var(--line); background: transparent; }

    /* ====== Content ====== */
    .content { display: grid; gap: 28px; }
    section { background: var(--card); border: 1px solid var(--line); border-radius: 16px; padding: 22px; }
    section h2 { margin: 0 0 10px; font-size: 1.25rem; }
    .muted { color: var(--muted); }
    .tight li { margin-bottom: 6px; }

    .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    @media (max-width: 700px) { .two-col { grid-template-columns: 1fr; } }

    details { border-top: 1px dashed var(--line); padding-top: 10px; }
    details summary { cursor: pointer; }

    .pub li { margin-bottom: 10px; }

    .footer { color: var(--muted); text-align: center; padding: 24px 0 40px; }
    /* ===== mobile safe-area + anchor offset ===== */
:root {
  /* iOS 刘海安全区；非 iOS 返回 0 */
  --safe-top: env(safe-area-inset-top, 0px);
  /* 页面滚动到锚点时的预留位（PC 80，移动含安全区） */
  --anchor-offset: 80px;
}

@media (max-width: 900px) {
  /* 容器上方多留出安全区，避免被顶部遮挡 */
  .wrap { padding-top: calc(var(--safe-top) + 12px); }
  /* 左栏在大屏 sticky，移动端取消粘性 */
  .sidebar { position: static; top: auto; }
}

/* PC 保持左栏 sticky，但考虑有安全区的机型（iPad/横屏） */
@media (min-width: 901px) {
  .sidebar { top: calc(var(--safe-top) + 24px); }
}

/* 点击导航锚点时，预留滚动顶距，避免标题被顶到卡片下方 */
html { scroll-padding-top: var(--anchor-offset); }
@media (max-width: 900px) {
  html { scroll-padding-top: calc(var(--safe-top) + 72px); }
}

/* 也可给每个 section 单独加： */
section { scroll-margin-top: var(--anchor-offset); }
@media (max-width: 900px) {
  section { scroll-margin-top: calc(var(--safe-top) + 72px); }
}
    /* Publications hanging indent + tighter rhythm */
.publist { padding-left: 0; margin: .25rem 0 0; }
.publist > li {
  list-style-position: inside;  /* 有序编号靠左 */
  margin: .6rem 0;
  padding-left: 1rem;           /* 悬挂缩进 */
  text-indent: -1rem;
}
.publist a { word-break: break-all; } /* DOI 在移动端不溢出 */


  </style>
</head>
<body>
  <div class="wrap">
    <!-- ================= Left / Sticky ================= -->
    <aside class="sidebar">
      <div class="card" style="text-align:center">
        <img src="/your-photo.jpg" alt="Portrait of Gwofan Zhang" class="avatar" />
        <h1 class="name">Gwofan Zhang <span style="font-weight:500">张国藩</span></h1>
        <p class="tagline">Medical Physics @ Duke | Photochemistry & AI for Molecular Design</p>
        <nav aria-label="Section navigation">
          <a href="#about">About</a>
          <a href="#news">News</a>
          <a href="#publications">Publications</a>
          <a href="#experience">Experience</a>
          <a href="#education">Education</a>
          <a href="#awards">Awards</a>
          <a href="#contact">Contact</a>
        </nav>
        <div style="margin-top:10px;text-align:left">
          <a class="pill" href="/coffee.html">☕ Coffee</a>
        </div>
      </div>

      <div class="card" style="margin-top:16px">
        <ul class="meta">
          <li><span class="label">Email</span> <a href="mailto:guofan.zhang@duke.edu">guofan.zhang@duke.edu</a></li>
          <li><span class="label">ORCID</span> <a href="https://orcid.org/0000-0002-1995-5355" target="_blank" rel="noopener">0000-0002-1995-5355</a></li>
          <li><span class="label">Scholar</span> <a href="https://scholar.google.com/citations?user=ENH-gs8AAAAJ" target="_blank" rel="noopener">Google Scholar</a></li>
          <li><span class="label">RGate</span> <a href="https://www.researchgate.net/profile/Guofan-Zhang-3" target="_blank" rel="noopener">Profile</a></li>
          <li><span class="label">Location</span> Durham, NC</li>
        </ul>
        <div class="social">
          <a class="pill" href="https://scholars.duke.edu/person/Guofan.Zhang" target="_blank" rel="noopener">Duke Profile</a>
          <a class="pill" href="/CV_Guofan%20Zhang.pdf" target="_blank" rel="noopener">CV (PDF)</a>
          <a class="pill" href="/sitemap.xml">Sitemap</a>
        </div>
      </div>
    </aside>

    <!-- ================= Right / Content ================= -->
    <main class="content">
      <section id="about">
        <h2>About Me</h2>
        <p>I am a Master candidate in the Medical Physics at the <a href="https://medicalphysics.duke.edu/" target="_blank">Duke University</a>. I am very fortunate to be advised by <a href="https://medicalphysics.duke.edu/members/fang-fang-yin-phd/" target="_blank">Prof. Fang-Fang Yin</a>. I received my joint Bachelors in Department of Materials Science and Engineering at the Southern University of Science and Technology and Yunnan University.</p>
        <p>My primary research interests lie in 3D printing phantom used in radiotherapy and using LLM to predict compound properties. Currently, I am working on Jiangsu Provincial Key Laboratory for Smart Diagnosis and Treatment of Lung Cancer. Previously, I have worked on <a href="https://faculty.sustech.edu.cn/?tagid=tianyq&iscss=1&snapid=1&orderby=date&go=2&lang=en" target="_blank">Organic Polymer Functional Materials Laboratory</a> at SUSTech and <a href="http://www.emd.riet.ynu.edu.cn/" target="_blank">Electronic Materials and Devices Group</a> at YNU.</p>
      </section>

      <section id="news">
        <h2>News & Updates</h2>
        <ul class="tight">
          <li><strong>2025</strong> — <em>Device</em> perspective accepted: <a href="https://www.sciencedirect.com/science/article/pii/S2666998625001607?via%3Dihub" target="_blank" rel="noopener">A Roadmap for 3D‑Printed Organs</a>.</li>
          <li><strong>2025</strong> — Joined <strong>Data+X</strong> (DIRC, Duke & DKU) and <strong>DII Cohort II</strong>.</li>
          <li><strong>2024</strong> — Started M.S. in Medical Physics @ Duke.</li>
        </ul>
      </section>

<section id="publications">
  <h2>Publications</h2>

  <h3 style="margin:.25rem 0 .5rem; font-style:italic;">Journal Articles</h3>
  <ol class="publist">
    <li><strong>Guofan Zhang</strong><sup>†*</sup>, Tan Zhang, Fang-Fang Yin<sup>*</sup>. A roadmap for the implementation of 3D-printed organs in healthcare. <em>Device</em> <strong>2025</strong>, 100847. <a href="https://doi.org/10.1016/j.device.2025.100847" target="_blank">https://doi.org/10.1016/j.device.2025.100847</a></li>
    <li>Shaoyong Cai<sup>†</sup>, <strong>Guofan Zhang</strong><sup>†</sup>, Lei Wang, Tianlan Jian, Jiatong Xu, Fengyu Su, Yanqing Tian. Ratiometric fluorescent sensor based on TPU-PVP coaxial nanofibers for monitoring trace ammonia in breath. <em>Materials Today Chemistry</em> <strong>26</strong> (2022), 101148. <a href="https://doi.org/10.1016/j.mtchem.2022.101148" target="_blank">https://doi.org/10.1016/j.mtchem.2022.101148</a></li>
    <li>Shaoyong Cai, Guangjie Song, <strong>Guofan Zhang</strong>, Lei Wang, Tianlan Jian, Jiatong Xu, Fengyu Su, Yanqing Tian. A multicolor fluorescent sensor array based on curcumin and its analogs as a shrimp freshness indicator. <em>Sensors and Actuators B: Chemical</em> <strong>367</strong> (2022), 132153. <a href="https://doi.org/10.1016/j.snb.2022.132153" target="_blank">https://doi.org/10.1016/j.snb.2022.132153</a></li>
    <li>He Zhang, Fangyuan Sun, Ge Cao, Dongyan Zhou, <strong>Guofan Zhang</strong>, Fengyu Su, Yanqing Tian, Yanhong Tian. Bifunctional flexible electrochromic supercapacitors based on silver nanowires flexible transparent electrodes. <em>Int. J. Extreme Manufacturing</em> <strong>5</strong> (2023), 015503. <a href="https://doi.org/10.1088/2631-7990/aca638" target="_blank">https://doi.org/10.1088/2631-7990/aca638</a></li>
    <li>Ge Cao, Jiatong Xu, Shaoyong Cai, <strong>Guofan Zhang</strong>, Yonghao Chen, He Zhang, Yanqing Tian. Highly conductive and dispersible PANI microtubes prepared in the presence of methyl orange. <em>ACS Applied Polymer Materials</em> <strong>4</strong> (2022), 5674–5682. <a href="https://doi.org/10.1021/acsapm.2c01674" target="_blank">https://doi.org/10.1021/acsapm.2c01674</a></li>
    <li>Min Shen, Hongtian Liu, Tingting Pan, Juewei Ning, Dongyan Zhou, Guangjie Song, Yuguo Wang, Shaoyong Cai, Xi Xia, <strong>Guofan Zhang</strong>, Fengyu Su, Yanqing Tian. Crosslinked PVA electrospinning nanofibrous film as a new platform for the design of K<sup>+</sup> sensor. <em>Sensors and Actuators B: Chemical</em> <strong>380</strong> (2023), 133317. <a href="https://doi.org/10.1016/j.snb.2023.133317" target="_blank">https://doi.org/10.1016/j.snb.2023.133317</a></li>
  </ol>

  <h3 style="margin-top:1rem; font-style:italic;">Patents</h3>
  <ul class="publist">
    <li>Yanqing Tian, Shaoyong Cai, <strong>Guofan Zhang</strong>, Ziqiang Wang. Curcumin derivative-based double-emission ratiometric fluorescence sensor and preparation. CN114634523 A (2022).</li>
    <li>Yanqing Tian, Shaoyong Cai, Guangjie Song, <strong>Guofan Zhang</strong>. Fluorescent ink and preparation method and application. CN114031977 A (2021).</li>
  </ul>

  <details style="margin-top:.5rem">
    <summary style="cursor:pointer">Author notes</summary>
    <p class="muted" style="margin:.25rem 0 0">
      <sup>†</sup> Co-first author &nbsp;•&nbsp; <sup>*</sup> Corresponding author
    </p>
  </details>
</section>

      <section id="experience" class="two-col">
        <div>
          <h2>Research Experience</h2>
          <ul>
            <li><strong>3D‑Printed Lung Phantoms (DKU/Duke)</strong> — simulate respiratory motion for radiotherapy dose verification; polymer selection for SLA printers; evaluate dose accuracy. <span class="muted">(Aug 2024–present)</span></li>
            <li><strong>AI‑predicted UV‑Vis spectra (DKU)</strong> — Chemprop‑based models from SMILES; conformer pipelines (RDKit/DFT); DTW/RMSE metrics; Bayesian HPO; exploring KANs & molecular embeddings. <span class="muted">(Jan 2025–present)</span></li>
            <li><strong>Curcumin derivatives for breath NH₃ sensing (SUSTech)</strong> — BFC derivatives; coaxial electrospinning TPU/PVP core‑shell; ratiometric probes; clinical feasibility. <span class="muted">(2021–2022)</span></li>
            <li><strong>Multicolor sensor array for shrimp freshness (SUSTech)</strong> — label fabrication; photophysics; on‑food monitoring. <span class="muted">(2020–2021)</span></li>
          </ul>
        </div>
        <div>
          <h2>Skills</h2>
          <ul>
            <li><strong>Experimental:</strong> UV‑Vis/fluorometry, SEM/EDS, XRD, FTIR, NMR.</li>
            <li><strong>Computation:</strong> Linux, MATLAB, Python, ChemDraw, SOLIDWORKS, Origin.</li>
          </ul>
        </div>
      </section>

      <section id="education" class="two-col">
        <div>
          <h2>Education</h2>
          <ul>
            <li><strong>Duke University</strong> — M.S. Medical Physics. <span class="muted">Aug 2024–present.</span></li>
            <li><strong>Yunnan University</strong> — B.Eng., Materials Science & Engineering (Joint Undergraduate). <span class="muted">Sep 2023–Jul 2024; rank 4/School.</span></li>
            <li><strong>Southern University of Science and Technology</strong> — Study in Materials . <span class="muted">Sep 2020–Jul 2022.</span></li>
            <li><strong>Yunnan University</strong> — Early coursework. <span class="muted">Sep 2019–Jun 2020.</span></li>
          </ul>
        </div>
        <div>
          <h2 id="awards">Honors, Awards & Funding</h2>
          <ul>
            <li>China National Scholarship (≈0.2%), 2022.</li>
            <li>Provincial Outstanding Graduate (≈0.5%), 2023.</li>
            <li>University First‑/Second‑class Scholarships & Outstanding Student (YNU), 2020–2022.</li>
            <li>First/Second/Third Prize — Micro‑photography & Metallography contests (SUSTech/YNU), 2021–2022.</li>
            <li><strong>Data+X</strong> (DIRC) & <strong>DII Cohort II</strong>, 2025.</li>
          </ul>
        </div>
      </section>

      <section id="contact">
        <h2>Conferences & Activities</h2>
        <ul>
          <li>Poster — 9th Int. Symposium on Space Radiation Research & Particle Radiotherapy, Suzhou 2024.</li>
          <li>Poster — 23rd National High‑tech Ceramics Academic Annual Conference, Hangzhou 2024.</li>
          <li>Oral Abstract — 22nd International Symposium on Organometallic Chemistry, Kyoto 2025.</li>
          <li>Invited Report — Chinese Materials Conference, Jul 2025.</li>
          <li>Volunteer & leadership — SUSTech Volunteer Union (33.5h), GU material innovation competition leader; TA for CHEM 110/150 (Dec 2024–May 2025).</li>
        </ul>
        <h2>Contact</h2>
        <p>Email: <a href="mailto:guofan.zhang@duke.edu">guofan.zhang@duke.edu</a>. ORCID: <a href="https://orcid.org/0000-0002-1995-5355" target="_blank" rel="noopener">0000‑0002‑1995‑5355</a>. Location: Durham, NC.</p>
      </section>

      <p class="footer">© <span id="y"></span> Gwofan Zhang • Built with GitHub Pages • Theme inspired by <a href="https://www.ngarabird.com/" target="_blank" rel="noopener">ngarabird.com</a></p>
    </main>
  </div>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();
  </script>
</body>
</html>

<!-- ====================== coffee.html (new page) ====================== -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Coffee — Gwofan Zhang</title>
  <meta name="description" content="Gwofan Zhang — Coffee log: beans, brew methods, tasting notes." />
  <link rel="canonical" href="https://gwofanzhang.github.io/coffee.html" />
  <style>
    :root { --bg:#ffffff; --text:#1f2937; --muted:#6b7280; --accent:#0ea5e9; --card:#f8fafc; --line:#e5e7eb; }
    @media (prefers-color-scheme: dark){ :root{ --bg:#0b1220; --text:#e5e7eb; --muted:#9ca3af; --accent:#38bdf8; --card:#0f172a; --line:#1f2937; } }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:1100px;margin:0 auto;padding:24px 16px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:16px}
    .title{font-weight:700;font-size:1.25rem}
    .pill{padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:transparent}
    .grid{display:grid;grid-template-columns:320px 1fr;gap:20px}
    @media(max-width:900px){.grid{grid-template-columns:1fr}}
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:16px}
    h2{margin:0 0 10px;font-size:1.1rem}
    label{display:block;margin:6px 0 2px;color:var(--muted);font-size:.9rem}
    input,select,textarea{width:100%;padding:8px 10px;border:1px solid var(--line);border-radius:10px;background:transparent;color:var(--text)}
    textarea{min-height:70px}
    button{padding:8px 12px;border:1px solid var(--line);border-radius:10px;background:var(--accent);color:white;cursor:pointer}
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;border-bottom:1px solid var(--line);text-align:left}
    .muted{color:var(--muted)}
    .row{display:flex;gap:10px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">☕ Coffee Log — Gwofan Zhang</div>
      <nav>
        <a class="pill" href="/">← Home</a>
        <a class="pill" href="#log">Brew Log</a>
        <a class="pill" href="#beans">Beans</a>
      </nav>
    </header>

    <div class="grid">
      <!-- Sidebar: Add Entry / Filters -->
      <aside class="card">
        <h2>Add a Brew</h2>
        <form id="brewForm">
          <label>Bean / Blend</label>
          <input name="bean" placeholder="Yirgacheffe Natural" required />
          <label>Roaster</label>
          <input name="roaster" placeholder="XYZ Roasters" />
          <div class="row">
            <div style="flex:1">
              <label>Origin</label>
              <input name="origin" placeholder="Ethiopia" />
            </div>
            <div style="flex:1">
              <label>Roast Date</label>
              <input name="roastDate" type="date" />
            </div>
          </div>
          <div class="row">
            <div style="flex:1">
              <label>Method</label>
              <select name="method">
                <option>V60</option>
                <option>Aeropress</option>
                <option>Espresso</option>
                <option>French Press</option>
                <option>Drip</option>
              </select>
            </div>
            <div style="flex:1">
              <label>Ratio (g coffee : g water)</label>
              <input name="ratio" placeholder="15:250" />
            </div>
          </div>
          <div class="row">
            <div style="flex:1">
              <label>Grind</label>
              <input name="grind" placeholder="Comandante 24" />
            </div>
            <div style="flex:1">
              <label>Temp (°C)</label>
              <input name="temp" type="number" step="0.1" placeholder="92" />
            </div>
          </div>
          <div class="row">
            <div style="flex:1">
              <label>Time (mm:ss)</label>
              <input name="time" placeholder="02:30" />
            </div>
            <div style="flex:1">
              <label>Rating (1-10)</label>
              <input name="rating" type="number" min="1" max="10" />
            </div>
          </div>
          <label>Notes</label>
          <textarea name="notes" placeholder="Tasting notes, bloom, pours, etc."></textarea>
          <div style="display:flex;gap:8px;margin-top:10px">
            <button type="submit">Save Brew</button>
            <button type="button" id="exportBtn" title="Download JSON">Export</button>
            <button type="button" id="clearBtn" title="Clear all">Clear</button>
          </div>
          <p class="muted" style="margin-top:8px">Data is saved locally in your browser (localStorage).</p>
        </form>

        <hr style="border:none;border-top:1px dashed var(--line);margin:16px 0" />
        <h2>Filter</h2>
        <label>Method</label>
        <select id="filterMethod">
          <option value="">All</option>
          <option>V60</option>
          <option>Aeropress</option>
          <option>Espresso</option>
          <option>French Press</option>
          <option>Drip</option>
        </select>
        <label style="margin-top:8px">Search</label>
        <input id="filterText" placeholder="bean / roaster / notes" />
      </aside>

      <!-- Main: Log Table & Beans Directory -->
      <main>
        <section id="log" class="card">
          <h2>Brew Log</h2>
          <table id="logTable">
            <thead>
              <tr>
                <th>Date</th><th>Method</th><th>Bean</th><th>Roaster</th><th>Ratio</th><th>Temp</th><th>Time</th><th>Rating</th><th>Notes</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </section>

        <section id="beans" class="card">
          <h2>Beans Directory</h2>
          <p class="muted">Unique beans you brewed, auto‑collected from the log.</p>
          <ul id="beanList"></ul>
        </section>
      </main>
    </div>

    <p class="muted" style="text-align:center;margin-top:20px">© <span id="y"></span> Gwofan Zhang • <a href="/">Back to Home</a></p>
  </div>

  <script>
    const LS_KEY = 'coffee_brews_v1';
    const byId = id => document.getElementById(id);
    const tbody = document.querySelector('#logTable tbody');
    const beanList = byId('beanList');

    function loadBrews(){
      try{ return JSON.parse(localStorage.getItem(LS_KEY)||'[]'); }catch(e){ return []; }
    }
    function saveBrews(data){ localStorage.setItem(LS_KEY, JSON.stringify(data)); }

    function render(){
      const data = loadBrews();
      const method = byId('filterMethod').value.toLowerCase();
      const text = byId('filterText').value.toLowerCase();
      tbody.innerHTML = '';
      const filtered = data.filter(d => (!method || d.method.toLowerCase()===method) &&
        (!text || JSON.stringify(d).toLowerCase().includes(text)));
      filtered.sort((a,b)=> new Date(b.date)-new Date(a.date));
      for(const d of filtered){
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${d.date||''}</td><td>${d.method||''}</td><td>${d.bean||''}</td><td>${d.roaster||''}</td><td>${d.ratio||''}</td><td>${d.temp||''}</td><td>${d.time||''}</td><td>${d.rating||''}</td><td>${d.notes||''}</td>`;
        tbody.appendChild(tr);
      }
      // beans directory
      const uniq = [...new Map(data.map(x=>[`${x.bean}|${x.roaster}`, x])).values()];
      beanList.innerHTML = uniq.map(x=>`<li><strong>${x.bean||'Unknown'}</strong> — ${x.roaster||'Roaster'} <span class="muted">(${x.origin||'Origin'})</span></li>`).join('');
    }

    // seed sample if empty
    if(loadBrews().length===0){
      saveBrews([
        {date:new Date().toISOString().slice(0,10), method:'V60', bean:'Yirgacheffe Natural', roaster:'Demo Roastery', origin:'Ethiopia', ratio:'15:250', grind:'24', temp:92, time:'02:30', rating:8, notes:'Berry, jasmine, syrupy.'}
      ]);
    }

    document.getElementById('brewForm').addEventListener('submit', e=>{
      e.preventDefault();
      const fd = new FormData(e.target);
      const entry = Object.fromEntries(fd.entries());
      entry.date = new Date().toISOString().slice(0,10);
      const list = loadBrews();
      list.push(entry); saveBrews(list); e.target.reset(); render();
    });
    byId('filterMethod').addEventListener('change', render);
    byId('filterText').addEventListener('input', render);
    byId('exportBtn').addEventListener('click', ()=>{
      const blob = new Blob([localStorage.getItem(LS_KEY)||'[]'], {type:'application/json'});
      const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'coffee_brews.json'; a.click();
    });
    byId('clearBtn').addEventListener('click', ()=>{ if(confirm('Clear all local coffee logs?')){ localStorage.removeItem(LS_KEY); render(); }});

    byId('y').textContent = new Date().getFullYear();
    render();
  </script>
</body>
</html>
